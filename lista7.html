<html>
  <head>
  </head>
  <body>

    <style>
      input {
        display: block;
        margin-bottom: 15px;
      }
    </style>

    <div>
      <label for="points">NÃºmero de pontos</label>
      <input type="number" id="points">
      <label for="multiplier">Multiplicador</label>
      <input type="number" id="multiplier">
      <button type="button" id="set">Set</button>
    </div>
    <canvas id="canvas" width="1000" height="600"></canvas>

    <script>
      var graph = {};
      var c=document.getElementById('canvas');
      var ctx=c.getContext("2d");

      function findPositions(deg) {
        var x = 500 + 250 * Math.cos(deg);
        var y = 300 + 250 * Math.sin(deg);
        return [x.toFixed(0), y.toFixed(0)];
      }

      function drawLine(a, b) {
              
        ctx.beginPath();
        ctx.moveTo(graph[a].x, graph[a].y);

        ctx.lineTo(graph[b].x, graph[b].y);
        ctx.stroke();

      }

      function drawLines() {
        for (var key in graph) {
          drawLine(key, graph[key].neighbour); 
        }
      }

      function findBuddies(multiplier, numberOfPoints) {
        for (var key in graph) {
          var neighbour = (key * multiplier) % numberOfPoints;
          graph[key].neighbour = neighbour;
        }
      }

      function allTheMagic(numberOfPoints, ctx) {
        var deg = 2 * Math.PI/numberOfPoints;
        for (var i = 0; i < numberOfPoints; i++) {
          var pos = findPositions(deg * i);
          graph[i] = {x: pos[0], y: pos[1], neighbour: null};
        }
               
      }

      function drawCircle() {
        ctx.beginPath();
        ctx.arc(500, 300,250, 0, 2*Math.PI);
        ctx.stroke();
      }

      function generateModularMultiplication() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawCircle();
        graph = {};
        var numberOfPoints = document.getElementById('points').value;
        var multiplier = document.getElementById('multiplier').value;
        allTheMagic(numberOfPoints, ctx);
        findBuddies(multiplier, numberOfPoints);
        drawLines();
      }

      var set = document.getElementById('set');
      drawCircle();

      set.addEventListener('click', function() {
        generateModularMultiplication();
      });
      
    </script>
  </body>
</html>
